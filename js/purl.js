(function(t){if(typeof define==="function"&&define.amd){define(t)}else{window.purl=t()}})(function(){var t={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],r={anchor:"fragment"},n={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},a=/^[0-9]+$/;function i(t,r){var a=decodeURI(t),i=n[r||false?"strict":"loose"].exec(a),f={attr:{},param:{},seg:{}},s=14;while(s--){f.attr[e[s]]=i[s]||""}f.param["query"]=l(f.attr["query"]);f.param["fragment"]=l(f.attr["fragment"]);f.seg["path"]=f.attr.path.replace(/^\/+|\/+$/g,"").split("/");f.seg["fragment"]=f.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");f.attr["base"]=f.attr.host?(f.attr.protocol?f.attr.protocol+"://"+f.attr.host:f.attr.host)+(f.attr.port?":"+f.attr.port:""):"";return f}function f(e){var r=e.tagName;if(typeof r!=="undefined")return t[r.toLowerCase()];return r}function s(t,e){if(t[e].length===0)return t[e]={};var r={};for(var n in t[e])r[n]=t[e][n];t[e]=r;return r}function o(t,e,r,n){var i=t.shift();if(!i){if(p(e[r])){e[r].push(n)}else if("object"==typeof e[r]){e[r]=n}else if("undefined"==typeof e[r]){e[r]=n}else{e[r]=[e[r],n]}}else{var f=e[r]=e[r]||[];if("]"==i){if(p(f)){if(""!==n)f.push(n)}else if("object"==typeof f){f[g(f).length]=n}else{f=e[r]=[e[r],n]}}else if(~i.indexOf("]")){i=i.substr(0,i.length-1);if(!a.test(i)&&p(f))f=s(e,r);o(t,f,i,n)}else{if(!a.test(i)&&p(f))f=s(e,r);o(t,f,i,n)}}}function u(t,e,r){if(~e.indexOf("]")){var n=e.split("[");o(n,t,"base",r)}else{if(!a.test(e)&&p(t.base)){var i={};for(var f in t.base)i[f]=t.base[f];t.base=i}if(e!==""){d(t.base,e,r)}}return t}function l(t){return h(String(t).split(/&|;/),function(t,e){try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}var n=e.indexOf("="),a=c(e),i=e.substr(0,a||n),f=e.substr(a||n,e.length);f=f.substr(f.indexOf("=")+1,f.length);if(i===""){i=e;f=""}return u(t,i,f)},{base:{}}).base}function d(t,e,r){var n=t[e];if(typeof n==="undefined"){t[e]=r}else if(p(n)){n.push(r)}else{t[e]=[n,r]}}function c(t){var e=t.length,r,n;for(var a=0;a<e;++a){n=t[a];if("]"==n)r=false;if("["==n)r=true;if("="==n&&!r)return a}}function h(t,e){var r=0,n=t.length>>0,a=arguments[2];while(r<n){if(r in t)a=e.call(undefined,a,t[r],r,t);++r}return a}function p(t){return Object.prototype.toString.call(t)==="[object Array]"}function g(t){var e=[];for(var r in t){if(t.hasOwnProperty(r))e.push(r)}return e}function m(t,e){if(arguments.length===1&&t===true){e=true;t=undefined}e=e||false;t=t||window.location.toString();return{data:i(t,e),attr:function(t){t=r[t]||t;return typeof t!=="undefined"?this.data.attr[t]:this.data.attr},param:function(t){return typeof t!=="undefined"?this.data.param.query[t]:this.data.param.query},fparam:function(t){return typeof t!=="undefined"?this.data.param.fragment[t]:this.data.param.fragment},segment:function(t){if(typeof t==="undefined"){return this.data.seg.path}else{t=t<0?this.data.seg.path.length+t:t-1;return this.data.seg.path[t]}},fsegment:function(t){if(typeof t==="undefined"){return this.data.seg.fragment}else{t=t<0?this.data.seg.fragment.length+t:t-1;return this.data.seg.fragment[t]}}}}m.jQuery=function(t){if(t!=null){t.fn.url=function(e){var r="";if(this.length){r=t(this).attr(f(this[0]))||""}return m(r,e)};t.url=m}};m.jQuery(window.jQuery);return m});