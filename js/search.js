(function(){window.addEventListener("load",function(){var e=purl(window.location);var a=document.querySelector("nav .navbar-subbrand");var n=document.querySelector("nav .search-post input");var r=document.querySelector(".posts-column .posts");var t=decodeURI(e.param("q"));var o=e.param("t")||.8;a.innerHTML="Search: "+t;n.value=t;t=t.split(/\s+/);mini.ajax.get("/search.json",function(e){var a=JSON.parse(e);var n=a.dict;var d=a.posts;var v=[];for(var l=0;l<d.length;l++){v.push([])}for(var i=0;i<t.length;i++){var c=t[i];if(c.length<=0)continue;var s=[];for(var l=0;l<d.length;l++){s.push([0,""])}for(var p in n){var h=new Levenshtein(p.toLowerCase(),c.toLowerCase());var u=p.length>c.length?p.length:c.length;u=(u-h.distance)/u;for(var l=0;l<n[p].length;l++){var m=n[p][l];if(u>s[m][0])s[m]=[u,p]}}for(var l=0;l<d.length;l++){v[l].push(s[l])}}for(var f=0;f<d.length;f++){var u=1;for(var l=0;l<v[f].length;l++){if(v[f][l][0]<u)u=v[f][l][0]}if(u<o)continue;var g=d[f];var C=document.createElement("div");C.className="post search-result";var L=document.createElement("div");L.className="page-header";var E=document.createElement("h1");var w=document.createElement("a");w.href=g.url;w.innerHTML=g.title;var H=document.createElement("div");H.className="post-date";H.innerHTML="Posted on "+g.date;var M=document.createElement("div");M.innerHTML=g.tags;var N=document.createElement("div");N.className="post-body";N.innerHTML=" "+g.description+" ...";r.appendChild(C);C.appendChild(L);L.appendChild(E);E.appendChild(w);L.appendChild(H);L.appendChild(M);C.appendChild(N)}})})})();